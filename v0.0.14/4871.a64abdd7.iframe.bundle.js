"use strict";(self.webpackChunkno_frills_ui=self.webpackChunkno_frills_ui||[]).push([[4871],{"./src/components/DragAndDrop/DragAndDrop.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>DragAndDrop_DragAndDrop});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/react/index.js"),emotion_styled_browser_esm=__webpack_require__("./node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js");function CheckCircle(props){return(0,jsx_runtime.jsxs)("svg",{height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",...props,children:[(0,jsx_runtime.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,jsx_runtime.jsx)("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})]})}try{DragIndicator.displayName="DragIndicator",DragIndicator.__docgenInfo={description:"",displayName:"DragIndicator",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/DragIndicator.tsx#DragIndicator"]={docgenInfo:DragIndicator.__docgenInfo,name:"DragIndicator",path:"src/icons/DragIndicator.tsx#DragIndicator"})}catch(__react_docgen_typescript_loader_error){}var constants=__webpack_require__("./src/shared/constants.ts"),types=__webpack_require__("./src/components/DragAndDrop/types.ts");const Item=(0,emotion_styled_browser_esm.A)("div",{target:"ertl9d70"})("cursor:",props=>props.showIndicator?"default":"move",";display:flex;user-select:",props=>props.showIndicator?"auto":"none",";border-top:2px dashed\n        ",props=>props.orientation===types.j.VERTICAL&&null!==props.active&&props.active>0?(0,constants.nv)(constants.eS.PRIMARY):"transparent",";border-bottom:2px dashed\n        ",props=>props.orientation===types.j.VERTICAL&&null!==props.active&&props.active<0?(0,constants.nv)(constants.eS.PRIMARY):"transparent",";border-left:2px dashed\n        ",props=>props.orientation===types.j.HORIZONTAL&&null!==props.active&&props.active>0?(0,constants.nv)(constants.eS.PRIMARY):"transparent",";border-right:2px dashed\n        ",props=>props.orientation===types.j.HORIZONTAL&&null!==props.active&&props.active<0?(0,constants.nv)(constants.eS.PRIMARY):"transparent",";opacity:",props=>props.dragging?.5:1,";border-radius:10px;&:focus{box-shadow:0 0 0 4px ",(0,constants.nv)(constants.eS.PRIMARY_LIGHT),";}&:focus:not(:focus-visible){box-shadow:none;}&:focus-visible{box-shadow:0 0 0 4px ",(0,constants.nv)(constants.eS.PRIMARY_LIGHT),";}"),DragKnob=(0,emotion_styled_browser_esm.A)("div",{target:"ertl9d71"})("padding-top:8px;cursor:move;touch-action:none;color:",(0,constants.nv)(constants.eS.DISABLED),";"),Container=(0,emotion_styled_browser_esm.A)("div",{target:"ertl9d72"})("flex:1;");function DragItem(props){const{index,orientation,children,showIndicator,dragOver,totalItems,setAnnouncement}=props,[active,setActive]=(0,react.useState)(0),touchTimerRef=(0,react.useRef)(null),context=(0,react.useContext)(types.C),vibrate=duration=>{navigator.vibrate&&navigator.vibrate(duration)},dragStartHandler=()=>{context?.setStartIndex(index),context?.setIsDragging(!0)},touchStartHandler=()=>{touchTimerRef.current&&clearTimeout(touchTimerRef.current),touchTimerRef.current=setTimeout(()=>{context?.setStartIndex(index),context?.setIsDragging(!0),context?.setDragOver(index),document.body.style.overflow="hidden",vibrate(50)},200)},touchEndHandler=()=>{touchTimerRef.current&&(clearTimeout(touchTimerRef.current),touchTimerRef.current=null),context?.isDragging&&(context?.drop(dragOver),vibrate(50),context?.setIsDragging(!1),document.body.style.overflow="auto")},handleKeyDown=e=>{const isVertical=orientation===types.j.VERTICAL,moveUp=isVertical?"ArrowUp":"ArrowLeft",moveDown=isVertical?"ArrowDown":"ArrowRight",isGrabbed=context?.isDragging&&context?.startIndex===index;if(" "===e.key||"Spacebar"===e.key)e.preventDefault(),isGrabbed?(context?.drop(index),setAnnouncement(context?.i18n.replacePlaceholders(context?.i18n.droppedAnnouncementTemplate,{position:index+1}))):(context?.startGrab(index),setAnnouncement(context?.i18n.replacePlaceholders(context?.i18n.grabbedAnnouncementTemplate,{position:index+1})));else if("Enter"===e.key&&isGrabbed)e.preventDefault(),context?.drop(index),setAnnouncement(context?.i18n.replacePlaceholders(context?.i18n.droppedAnnouncementTemplate,{position:index+1}));else if("Escape"===e.key&&isGrabbed)e.preventDefault(),context?.cancel(),setAnnouncement(context?.i18n.cancelledAnnouncementTemplate);else if(isGrabbed)if(e.key===moveUp&&index>0&&null!==context.startIndex){e.preventDefault();const newIndex=index-1;context.onDrop(context.startIndex,newIndex),context.setStartIndex(newIndex),setAnnouncement(context.i18n.replacePlaceholders(context.i18n.movedAnnouncementTemplate,{position:newIndex+1}))}else if(e.key===moveDown&&index<totalItems-1&&null!==context.startIndex){e.preventDefault();const newIndex=index+1;context.onDrop(context.startIndex,newIndex),context.setStartIndex(newIndex),setAnnouncement(context.i18n.replacePlaceholders(context.i18n.movedAnnouncementTemplate,{position:newIndex+1}))}};return(0,react.useEffect)(()=>()=>{touchTimerRef.current&&(clearTimeout(touchTimerRef.current),touchTimerRef.current=null),document.body.style.overflow="auto"},[]),(0,react.useEffect)(()=>{setActive(context?.isDragging&&null!==context?.startIndex&&dragOver===index?context?.startIndex-index:0)},[dragOver,context?.startIndex,index,context?.isDragging]),(0,jsx_runtime.jsxs)(Item,{draggable:!showIndicator,showIndicator,active,dragging:!(!context?.isDragging||context.startIndex!==index),orientation,"data-drag-index":index,tabIndex:0,role:"listitem","aria-label":context?.i18n.replacePlaceholders(context.i18n.itemAriaLabelTemplate,{position:index+1}),"aria-grabbed":context?.isDragging&&context.startIndex===index,onKeyDown:handleKeyDown,onDragStart:showIndicator?void 0:dragStartHandler,onDragOver:e=>{e.preventDefault(),e.stopPropagation(),context&&null!==context.startIndex&&setActive(context.startIndex-index)},onDragLeave:()=>{setActive(0)},onDrop:e=>{e.preventDefault(),setActive(0),context?.drop(index),context?.setIsDragging(!1)},onTouchStart:showIndicator?void 0:touchStartHandler,onTouchMove:e=>{const touch=e.touches[0];if(touch)if(context?.isDragging){e.preventDefault();const el=document.elementFromPoint(touch.clientX,touch.clientY),overAttr=el?.closest("[data-drag-index]")?.getAttribute("data-drag-index"),overIndex=null!=overAttr?parseInt(overAttr,10):null;null!==overIndex&&context?.setDragOver(overIndex)}else touchTimerRef.current&&(clearTimeout(touchTimerRef.current),touchTimerRef.current=null)},onTouchEnd:touchEndHandler,onTouchCancel:touchEndHandler,children:[showIndicator&&(0,jsx_runtime.jsx)(DragKnob,{draggable:!0,role:"button","aria-label":context?.i18n.dragHandleAriaLabel,onDragStart:dragStartHandler,onTouchStart:touchStartHandler,onKeyDown:handleKeyDown,tabIndex:-1,children:(0,jsx_runtime.jsx)(CheckCircle,{})}),(0,jsx_runtime.jsx)(Container,{children})]})}try{DragItem.displayName="DragItem",DragItem.__docgenInfo={description:"A draggable item component that supports both mouse and touch interactions for drag-and-drop functionality.",displayName:"DragItem",props:{index:{defaultValue:null,description:"Position index of the draggable item",name:"index",required:!0,type:{name:"number"}},orientation:{defaultValue:null,description:"Orientation of the drag operation (VERTICAL or HORIZONTAL)",name:"orientation",required:!0,type:{name:"enum",value:[{value:'"horizontal"'},{value:'"vertical"'}]}},showIndicator:{defaultValue:null,description:"Whether to show a drag handle indicator instead of making the entire item draggable",name:"showIndicator",required:!0,type:{name:"boolean"}},dragOver:{defaultValue:null,description:"The index of the item currently being dragged over",name:"dragOver",required:!0,type:{name:"number | null"}},totalItems:{defaultValue:null,description:"Total number of items in the list",name:"totalItems",required:!0,type:{name:"number"}},setAnnouncement:{defaultValue:null,description:"Callback to set announcement for screen readers",name:"setAnnouncement",required:!0,type:{name:"(message?: string | undefined) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/DragAndDrop/DragItem.tsx#DragItem"]={docgenInfo:DragItem.__docgenInfo,name:"DragItem",path:"src/components/DragAndDrop/DragItem.tsx#DragItem"})}catch(__react_docgen_typescript_loader_error){}const DragAndDrop_Container=(0,emotion_styled_browser_esm.A)("div",{target:"e18d6tqk0"})("flex:1;display:flex;position:relative;flex-wrap:wrap;flex-direction:",props=>props.orientation===types.j.HORIZONTAL?"row":"column",";"),VisuallyHidden=(0,emotion_styled_browser_esm.A)("div",{target:"e18d6tqk1"})("position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0;");function DragAndDropComponent(props,ref){const{orientation=types.j.VERTICAL,children,onDrop,showIndicator=!1,itemAriaLabelTemplate="Item {:position}. Press {:grabKey} to grab, {:moveKeys} to move, {:dropKey} or {:altDropKey} to drop",dragHandleAriaLabel="Drag to reorder",grabbedAnnouncementTemplate="Item {:position} grabbed. Use {:moveKeys} to move, {:dropKey} or {:altDropKey} to drop, {:cancelKey} to cancel",movedAnnouncementTemplate="Item moved to position {:position}",droppedAnnouncementTemplate="Item dropped at position {:position}",cancelledAnnouncementTemplate="Drag cancelled, item restored to original position",...rest}=props,[startIndex,setStartIndex]=(0,react.useState)(null),[originalIndex,setOriginalIndex]=(0,react.useState)(null),[isDragging,setIsDragging]=(0,react.useState)(!1),[dragOver,setDragOver]=(0,react.useState)(null),[announcement,setAnnouncement]=(0,react.useState)(""),childrenArray=react.Children.toArray(children),totalItems=childrenArray.length,i18n={itemAriaLabelTemplate:itemAriaLabelTemplate??"Item {:position}. Press {:grabKey} to grab, {:moveKeys} to move, {:dropKey} or {:altDropKey} to drop",dragHandleAriaLabel:dragHandleAriaLabel??"Drag to reorder",grabbedAnnouncementTemplate:grabbedAnnouncementTemplate??"Item {:position} grabbed. Use {:moveKeys} to move, {:dropKey} or {:altDropKey} to drop, {:cancelKey} to cancel",movedAnnouncementTemplate:movedAnnouncementTemplate??"Item moved to position {:position}",droppedAnnouncementTemplate:droppedAnnouncementTemplate??"Item dropped at position {:position}",cancelledAnnouncementTemplate:cancelledAnnouncementTemplate??"Drag cancelled, item restored to original position",replacePlaceholders:(template,data)=>template.replace(/\{:position\}/g,String(data.position??"")).replace(/\{:grabKey\}/g,data.grabKey??"Space").replace(/\{:dropKey\}/g,data.dropKey??"Space").replace(/\{:altDropKey\}/g,data.altDropKey??"Enter").replace(/\{:cancelKey\}/g,data.cancelKey??"Escape").replace(/\{:moveKeys\}/g,data.moveKeys??(orientation===types.j.VERTICAL?"Arrow Up/Down":"Arrow Left/Right"))};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(types.C.Provider,{value:{startIndex,setStartIndex,drop:index=>{null!==startIndex&&null!==index&&onDrop?.(startIndex,index),setStartIndex(null),setOriginalIndex(null),setIsDragging(!1)},onDrop,cancel:()=>{null!==originalIndex&&null!==startIndex&&startIndex!==originalIndex&&onDrop?.(startIndex,originalIndex),setStartIndex(null),setOriginalIndex(null),setIsDragging(!1)},startGrab:index=>{setStartIndex(index),setOriginalIndex(index),setIsDragging(!0)},isDragging,setIsDragging,setDragOver,i18n},children:(0,jsx_runtime.jsx)(DragAndDrop_Container,{...rest,ref,orientation,role:"list",children:react.Children.map(childrenArray,(child,index)=>(0,jsx_runtime.jsx)(DragItem,{index,orientation,showIndicator,dragOver,totalItems,setAnnouncement,children:child}))})}),(0,jsx_runtime.jsx)(VisuallyHidden,{role:"status","aria-live":"polite","aria-atomic":"true",children:announcement})]})}const DragAndDrop=react.forwardRef(DragAndDropComponent),DragAndDrop_DragAndDrop=DragAndDrop;try{DragAndDrop.displayName="DragAndDrop",DragAndDrop.__docgenInfo={description:"",displayName:"DragAndDrop",props:{orientation:{defaultValue:{value:"ORIENTATION.VERTICAL"},description:"Orientation of the list layout",name:"orientation",required:!1,type:{name:"enum",value:[{value:'"horizontal"'},{value:'"vertical"'}]}},onDrop:{defaultValue:null,description:"Drop event handler",name:"onDrop",required:!0,type:{name:"(start: number, end: number) => void"}},showIndicator:{defaultValue:{value:"false"},description:"Shows drag indicator against each list item",name:"showIndicator",required:!1,type:{name:"boolean"}},itemAriaLabelTemplate:{defaultValue:{value:"'Item {:position}. Press {:grabKey} to grab, {:moveKeys} to move, {:dropKey} or {:altDropKey} to drop'"},description:"i18n: Template for item aria-label. Placeholders: {:position}, {:grabKey}, {:moveKeys}, {:dropKey}, {:altDropKey}",name:"itemAriaLabelTemplate",required:!1,type:{name:"string"}},dragHandleAriaLabel:{defaultValue:{value:"'Drag to reorder'"},description:"i18n: Aria label for drag handle",name:"dragHandleAriaLabel",required:!1,type:{name:"string"}},grabbedAnnouncementTemplate:{defaultValue:{value:"'Item {:position} grabbed. Use {:moveKeys} to move, {:dropKey} or {:altDropKey} to drop, {:cancelKey} to cancel'"},description:"i18n: Template for grabbed announcement. Placeholders: {:position}, {:moveKeys}, {:dropKey}, {:altDropKey}, {:cancelKey}",name:"grabbedAnnouncementTemplate",required:!1,type:{name:"string"}},movedAnnouncementTemplate:{defaultValue:{value:"'Item moved to position {:position}'"},description:"i18n: Template for moved announcement. Placeholders: {:position}",name:"movedAnnouncementTemplate",required:!1,type:{name:"string"}},droppedAnnouncementTemplate:{defaultValue:{value:"'Item dropped at position {:position}'"},description:"i18n: Template for dropped announcement. Placeholders: {:position}",name:"droppedAnnouncementTemplate",required:!1,type:{name:"string"}},cancelledAnnouncementTemplate:{defaultValue:{value:"'Drag cancelled, item restored to original position'"},description:"i18n: Template for cancelled announcement",name:"cancelledAnnouncementTemplate",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/DragAndDrop/DragAndDrop.tsx#DragAndDrop"]={docgenInfo:DragAndDrop.__docgenInfo,name:"DragAndDrop",path:"src/components/DragAndDrop/DragAndDrop.tsx#DragAndDrop"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/DragAndDrop/types.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>DragContext,j:()=>ORIENTATION});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),ORIENTATION=function(ORIENTATION){return ORIENTATION.HORIZONTAL="horizontal",ORIENTATION.VERTICAL="vertical",ORIENTATION}({});const DragContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(null)},"./src/shared/constants.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{eS:()=>THEME_NAME,nl:()=>themeNameMap,nv:()=>getThemeValue});var THEME_NAME=function(THEME_NAME){return THEME_NAME.PRIMARY="--nfui-primary",THEME_NAME.PRIMARY_LIGHT="--nfui-primary-light",THEME_NAME.PRIMARY_LIGHTER="--nfui-primary-lighter",THEME_NAME.INFO="--nfui-info",THEME_NAME.INFO_LIGHT="--nfui-info-light",THEME_NAME.SUCCESS="--nfui-success",THEME_NAME.SUCCESS_LIGHT="--nfui-success-light",THEME_NAME.WARNING="--nfui-warning",THEME_NAME.WARNING_LIGHT="--nfui-warning-light",THEME_NAME.ERROR="--nfui-error",THEME_NAME.ERROR_LIGHT="--nfui-error-light",THEME_NAME.BORDER_COLOR="--nfui-border-color",THEME_NAME.TOAST="--nfui-toast",THEME_NAME.TOOLTIP_COLOR="--nfui-tooltip-color",THEME_NAME.BORDER_LIGHT_COLOR="--nfui-border-light-color",THEME_NAME.BACKGROUND="--nfui-background",THEME_NAME.DISABLED_BACKGROUND="--nfui-disabled-background",THEME_NAME.DISABLED_BORDER="--nfui-disabled-border",THEME_NAME.LIGHT_GREY="--nfui-light-grey",THEME_NAME.DISABLED="--nfui-disabled",THEME_NAME.TEXT_COLOR_LIGHT="--nfui-text-color-light",THEME_NAME.TEXT_COLOR_DARK="--nfui-text-color-dark",THEME_NAME.SHADOW="--nfui-shadow",THEME_NAME.HOVER_SHADOW="--nfui-hover-shadow",THEME_NAME.MODAL_SHADOW="--nfui-modal-shadow",THEME_NAME.BACKDROP_COLOR="--nfui-backdrop-color",THEME_NAME}({});const themeNameMap={"--nfui-primary":"#1f7ac5","--nfui-primary-light":"#64baff","--nfui-primary-lighter":"#cfe9ff","--nfui-info":"#1f7ac5ff","--nfui-info-light":"#64baffff","--nfui-success":"#1a835f","--nfui-success-light":"#80eac6","--nfui-warning":"#916b01","--nfui-warning-light":"#ffba00","--nfui-error":"#bb2828","--nfui-error-light":"#f1a5a5","--nfui-backdrop-color":"#2681da80","--nfui-border-color":"#555555","--nfui-toast":"#5f5f5f","--nfui-tooltip-color":"rgba(0,0,0,0.6)","--nfui-border-light-color":"#eeeeee","--nfui-background":"#ffffff","--nfui-disabled-background":"#fafafa","--nfui-disabled-border":"#aaa","--nfui-light-grey":"#ccc","--nfui-disabled":"#737373","--nfui-text-color-light":"#fff","--nfui-text-color-dark":"#000","--nfui-shadow":"0px 1px 3px 0px rgba(0,0,0,0.1), 0px 1px 2px 0px rgba(0,0,0,0.06)","--nfui-hover-shadow":"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)","--nfui-modal-shadow":"0px 8px 17px 2px rgba(0,0,0,0.14), 0px 3px 14px 2px rgba(0,0,0,0.12), 0px 5px 5px -3px rgba(0,0,0,0.2)"},getThemeValue=key=>`var(${key}, ${themeNameMap[key]})`}}]);