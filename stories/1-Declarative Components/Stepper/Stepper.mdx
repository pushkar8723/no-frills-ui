import { Meta, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as StepperStories from './Stepper.stories';

<Meta of={StepperStories} />

# Stepper

A horizontal stepper component. Can be used for displaying progress in a multi-step form.

> **Note:** Buttons in the footer have to be wired manually. `StepBody` and `StepFooter` are completely optional
> and any other component can be used in their place. They are exported to help in maintaining style consistency.

<Canvas of={StepperStories.Demo} className="canvas-background" />

```jsx
import { Stepper, Step, StepBody, StepFooter } from 'no-frills-ui';

// render
<Stepper active={1}>
    <Step name="Welcome" completed>
        <StepBody>Welcome to this multi-step form.</StepBody>
        <StepFooter>
            <ActionButton>Next</ActionButton>
        </StepFooter>
    </Step>
    <Step name="Basic Details">
        <StepBody>Enter your details here.</StepBody>
        <StepFooter>
            <Button>Prev</Button>
            <ActionButton>Next</ActionButton>
        </StepFooter>
    </Step>
    <Step name="Personalisation" disabled>
        <StepBody>Personalize your view here.</StepBody>
    </Step>
    <Step name="Verification">
        <StepBody>Verify if you are human.</StepBody>
    </Step>
</Stepper>;
```

## Props for `Stepper`

<Controls of={StepperStories.StepperProps} />

## Props for `Step`

<Controls of={StepperStories.StepProps} />

## CSS Variables used

| Variable Name                | Description                                     |
| :--------------------------- | :---------------------------------------------- |
| `--nfui-border-light-color`  | Used for `border-color` and `background-color`. |
| `--nfui-light-grey`          | Used for `background-color`.                    |
| `--nfui-background`          | Used for `background-color`.                    |
| `--nfui-disabled-background` | Used for `background-color`.                    |
| `--nfui-primary-lighter`     | Used for `background-color`.                    |
| `--nfui-text-color-dark`     | Used for `color`.                               |

## Accessibility

The Stepper component is designed to meet WCAG 2.1 AA accessibility requirements:

- **Keyboard Navigation:**
    - Steps are rendered as accessible buttons with `role="tab"`.
    - Use <kbd>ArrowLeft</kbd>/<kbd>ArrowUp</kbd> and <kbd>ArrowRight</kbd>/<kbd>ArrowDown</kbd> to move focus between steps.
    - <kbd>Tab</kbd> focuses the active step only.
- **ARIA Roles & Attributes:**
    - The stepper header uses `role="tablist"`.
    - Each step button uses `role="tab"`, `aria-selected`, and `aria-disabled` as appropriate.
    - The active step is announced to assistive technologies.
- **Focus Management:**
    - When a step is activated, focus moves to its button for clear navigation.
- **Developer Responsibilities:**
    - Ensure step names are descriptive for screen readers.
    - Avoid disabling all steps; at least one should be focusable.
    - Confirm color contrast for custom themes meets accessibility standards.
