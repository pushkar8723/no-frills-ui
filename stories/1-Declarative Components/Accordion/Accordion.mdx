import { Meta, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as AccordionStories from './Accordion.stories';
import * as AccordionStepStories from './AccordionStep.stories';

<Meta of={AccordionStories} />

# Accordion

Custom implementation to create an Accordion. There are 2 components that are used here together to create an Accordion.
`Accordion` and `AccordionStep`. `Accordion` is the outer wrapper and has `active` and `onStepClick` props.
Whereas each step in accordion is defined using `AccordionStep` component and has `header`, `errorText`, `completed`
and `disabled` props. Each step is focusable and only one step can be opened at a time.

`AccordionStepBody` and `AccordionStepFooter` are two components which helps in maintaining the design language of
the components and are completely optional to use.

<Canvas of={AccordionStories.Default} className="canvas-background" />

```jsx
import { Accordion, AccordionStep } from 'no-frills-ui';

// Render
<Accordion>
    <AccordionStep header="Welcome">Dummy content for Welcome step</AccordionStep>
    <AccordionStep header="Basic Details" completed>
        Dummy content for Basic Details step
    </AccordionStep>
    <AccordionStep header="Personalisation" errorText="3 Errors" disabled>
        Dummy content for Personalisation step
    </AccordionStep>
    <AccordionStep header="Verification">Dummy content for Verification step</AccordionStep>
</Accordion>;
```

## Props and Ref

`Accordion` component doesn't render any element on DOM and so there it doesn't forward any `props` or `ref`.
It is used just for managing states for all the steps inside it.

`AccordionStep` renders the header and body of the step inside a [Card](/docs/declarative-components-card--docs) component.
`Card` is a `HTMLDivElement` and any additional `props` and `ref` are forwarded to this `Card` component.

### `Accordion` Props

<Controls of={AccordionStories.AccordionProps} />

### `AccordionStep` Props

<Controls of={AccordionStepStories.AccordionStepProps} />

## CSS Variables Used

| Variable Name               | Description              |
| --------------------------- | ------------------------ |
| `--nfui-primary`            | Used for `color`.        |
| `--nfui-primary-light`      | Used for `box-shadow`.   |
| `--nfui-success`            | Used for `color`.        |
| `--nfui-light-grey`         | Used for `border-color`. |
| `--nfui-border-light-color` | Used for `border-color`. |
| `--nfui-disabled`           | Used for `color`.        |
| `--nfui-text-color-dark`    | Used for `color`.        |

## Accessibility

This component follows WCAG 2.1 AA guidelines:

### Keyboard Navigation

- **Tab**: Navigate between accordion step buttons
- **Enter/Space**: Toggle the focused accordion step open/closed

### Screen Reader Support

- Each accordion button has `aria-expanded` to indicate its state (expanded/collapsed)
- Each accordion button has `aria-controls` linking it to its content region
- Content regions have `role="region"` with `aria-labelledby` connecting to their header
- Decorative icons are marked with `aria-hidden="true"` to prevent screen reader announcement
- Disabled steps are properly announced and cannot be activated

### Visual Indicators

- Clear focus indicator (blue outline) on keyboard navigation
- Visual state indicators for open, completed, and error states
- Sufficient color contrast for text and interactive elements (meets 4.5:1 ratio)

### Best Practices

- Use descriptive `header` text for each step
- Provide meaningful `errorText` when validation fails
- Only one step can be open at a time, reducing cognitive load
- Content is progressively disclosed to improve focus and comprehension
